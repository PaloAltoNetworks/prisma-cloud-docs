== CodeBuild project encryption is disabled


*Policy Details* 

[width=45%]
[cols="1,1"]
|=== 
|Prisma Cloud Policy ID 
| 1d84f4c4-fc12-40e5-9b65-44c05b7dafc3

|Checkov Check ID 
| https://github.com/bridgecrewio/checkov/tree/master/checkov/terraform/checks/resource/aws/CodeBuildProjectEncryption.py[CKV_AWS_78]

|Severity
|MEDIUM

|Subtype
|Build

|Frameworks
|CloudFormation,Terraform,TerraformPlan,Serverless

|=== 



*Description* 


AWS CodeBuild is a fully managed build service in the cloud.
CodeBuild compiles your source code, runs unit tests, and produces artifacts that are ready to deploy.
Build artifacts, such as a cache, logs, exported raw test report data files, and build results, are encrypted by default using CMKs for Amazon S3 that are managed by the AWS Key Management Service.
If you do not want to use these CMKs, you must create and configure a customer-managed CMK.

=== Fix - Buildtime


*Terraform* 


* *Resources:* aws_codebuild_project
* *Arguments:* encryption_disabled - (Optional) If set to true, output artifacts will not be encrypted.
If type is set to NO_ARTIFACTS then this value will be ignored.
Defaults to false.
To fix, either set to false or remove attribute.


[source,go]
----
{
  "codes": [
    {
      "code": "resource "aws_codebuild_project" "project-with-cache" {
  ...
  name           = "test-project-cache"
  artifacts {
+    encryption_disabled = false
  }
  ...
}",
      "language": "go"
    }
  ]
}
----


*CloudFormation* 


* *Resources:* AWS::CodeBuild::Project
* *Arguments:* Properties.Artifacts - (Optional) If set to true, output artifacts will not be encrypted.
If type is set to NO_ARTIFACTS then this value will be ignored.
Defaults to false.


[source,yaml]
----
{
  "codes": [
    {
      "code": "Resources: 
  CodeBuildProject:
    Type: AWS::CodeBuild::Project
    Properties: 
      ...
      Artifacts:
        ...
\t\t\t\tType: S3       
-\t\t\t\tEncryptionDisabled: True
+\t\t\t\tEncryptionDisabled: False",
      "language": "yaml"
    }
  ]
}
----
