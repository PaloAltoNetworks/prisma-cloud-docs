== 22.06 Update 2 Release Notes

The following table provides the release details:

[cols="1,4"]
|===
|Build
|22.06.xxx

|Codename
|Kepler, 22.06 Update 2
//Tentative date
|Release date
|Sep 15, 2022

|Type
|Maintenance release

|SHA-256 digest
|
|===

// Besides hosting the download on the Palo Alto Networks Customer Support Portal, we also support programmatic download (e.g., curl, wget) of the release directly from our CDN:
//
// LINK

=== Improvements, Fixes, and Performance Enhancements
// GithubIssue PCSUP-issue#

// GH# 39754
==== Prisma Cloud Compute now supports additional options for embedding a Defender to a CloudFormation Fargate task

* Prisma Cloud Compute now supports embedding a Defender to a CloudFormation Fargate task in the YAML format, in addition to the JSON format.

** You can use a full CloudFormation template that contains other objects in addition to the Fargate task to generate a protected Fargate task definition.

** You can use the Console (Manage > Defenders > Deploy > Defenders) or the APIs (/api/22.06/defenders/fargate.yaml, /api/22.06/defenders/fargate.json) to complete the workflow.

// GH#40449 PCSUP-10632
* Fixed an issue that caused Defender to incorrectly report the Host OS as SLES15SP1 instead of SLES15.

// GH#40673 #PCSUP-10988  #PCSUP-1940
* Fixed an internal error that failed to refresh the vulnerability statistics under *Monitor > Vulnerabilities > Vulnerability Explorer*.

// GH#39394	PCSUP-9241
* Fixed an explicit deny error when sending a test alert to the AWS Security Hub integration. With this fix, the correct AWS product ARN for US and China regions are used.

// GH#32310 PCSUP-10507
* Fixed a bug in scanning images that mount on a directory when a parent directory is a symlink, causing many false binary detections.
OR
* Fixed a bug in scanning images on container defenders installed on CRI with CRI-O containerd that mount on a directory when a parent directory is a symlink, causing many false binary detections.
OR
* The image scans on container defenders installed on CRI with CRI-O containerd running from the host namespace are ignored to avoid false binary vulnerability detections.

// GH#39262
* Added support for more orchestrators:
  
** Google Kubernetes Engine (GKE) version 1.24.2 with containerd version 1.5.13

** Elastic Kubernetes Service (EKS) version 1.23.7

** Azure Kubernetes Service (AKS) version 1.24.3 running on Linux

** AKS version 1.24.3 running on Windows

** Lightweight Kubernetes (k3s) version v1.24.4+k3s1 with containerd v1.5.13-k3s1

** Openshift version 4.11 with CRIO

** Rancher Kubernetes Engine (RKE) version 1.24.4+rke2r1 with containerd 1.6.6-k3s1

// GH#40515 PCSUP-10791
Fixed an issue that prevented editing WAAS rules. On upgrade to 22.06, it was not possible to update or modify WAAS rules configured to protect the same port at multiple endpoints with different attributes, such as TLS, HTTP2, and gRPC.
With this fix, such rules can now be modified.

=== Known Issues
// GH# PCSUP-

=== End of Support Notifications

// GH#38468
* With the end of support for Maven system dependencies, https://docs.paloaltonetworks.com/prisma/prisma-cloud/22-06/prisma-cloud-compute-edition-admin/install/install_defender/install_serverless_defender[Defender injection for java functions] is now implemented using the bundle as a Maven internal repository. With this update, `<systemPath>` dependency is no longer used. 

// GH#39984
* With the end of support for compile dependency in Gradle 7.0, https://docs.paloaltonetworks.com/prisma/prisma-cloud/22-06/prisma-cloud-compute-edition-admin/install/install_defender/install_serverless_defender[Defender injection for java functions] is updated to implementation dependency using an internal repository.

=== Upcoming breaking changes

// GH#40768
On upgrade to the next release, Lagrange, if you have configured an alert profile on *Compute > Manage > Alerts* and enabled the *Image vulnerabilities (registry and deployed) trigger* as well as the *Immediately alert for deployed resources* setting, you will now be getting immediate alerts for vulnerable registry images along with immediate alerts for deployed images.

image::immediate-alert-registry-images.png[width=400]

The volume of immediate alerts that are generated maybe much higher than what you've seen in the previous releases because support for immediate alerting for registry images is being added in Lagrange. With this change, the Image vulnerabilities (registry and deployed) option is being separated into two: Deployed images vulnerabilities and Registry images vulnerabilities, and both these triggers will be enabled if the original trigger was enabled in the alert profile.