:topic_type:task

== Scan Images in CoreOS Quay Registry

To scan a repository in *CoreOS Quay*, configure the registry.

*Prerequisites*

* You have https://docs.paloaltonetworks.com/content/techdocs/en_US/prisma/prisma-cloud/prisma-cloud-admin-compute/install/deploy-defender/defender_types.html[installed a Defender] somewhere in your environment.
* On the scanner Defender add the quay registry in the known hosts file, for example:
    
    vim /etc/hosts
    10.181.122.111 quay-sever.twistlock.com

//* To add an https://docs.docker.com/registry/insecure/[insecure registry], edit the `/etc/docker/daemon.json` file in Linux and     `C:\ProgramData\docker\config\daemon.json` on Windows Server.

//    {
//        "insecure-registries" : ["http://myregistrydomain.com:5000"]
//    }
// `sudo systemctl restart docker`

[.task]
=== Add a CoreOS Quay Registry in Prisma Cloud

[.procedure]
. Log in to Console, and select *Defend > Vulnerabilities > Images > Registry settings*.

. Select *Add registry* and enter the details:

.. In *Version*, select *CoreOS Quay*.
.. In *Registry (Optional)* enter the Fully Qualified Domain Name (FQDN) for the CoreOS Quay registry server.
.. In *Repository*, enter the name of the repository to scan.
.. Optionally enter the *Repositories to exclude* them from being scanned.
.. Enter *Tag* numbers to scan, leave blank, or enter a wildcard (*) to scan all the tags.
.. Optionally, enter *Tags to exclude*, to avoid scanning images with specified tags.
.. In *Credential*, configure how Prisma Cloud authenticates with CoreOS Quay.
+
Select the credential for CoreOS Quay from the drop-down list.
+
If there are no credentials in the list, click *Add new* to create new credentials under *Manage > Authentication > Credentials Store*.
.. In *OS type*, specify whether the repo holds *Linux* or *Windows* images.
.. In *Scanners scope*, specify the collections of defenders to use for the scan.
.. In *Number of scanners*, enter the number of Defenders across which scan jobs can be distributed.
.. In *Cap*, limit the number of images to scan.
+
Set *Cap* to *5* to scan the five most recent images, or enter a different value to increase or decrease the limit.
Set *Cap* to *0* to scan all images.
.. Select *Add*.

. Select *Save and scan*.
+
Verify that the images in the repository are being scanned under *Monitor > Vulnerabilities > Images > Registries*.


