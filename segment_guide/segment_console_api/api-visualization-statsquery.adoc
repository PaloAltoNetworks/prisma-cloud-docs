== visualization/statsquery

=== StatsInfo

Lists the fields and tags available in a statistics measurement.

==== Example

[source,json]
----
{
  "measurement": "Flows"
}
----

==== Relations

===== `POST /statsinfo`

Retrieves information about the content of the stats measurement.

==== Attributes

===== `fields` [`autogenerated`,`read_only`]

Type: `map[string]string`

Contains the list of fields. You cannot group by these fields.

===== `measurement`

Type:
`enum(Flows | Audit | Enforcers | Files | EventLogs | Counters | Accesses | Packets | DNSLookups | PingReports)`

Name of the measurement.

Default value:

[source,json]
----
"Flows"
----

===== `tags` [`autogenerated`,`read_only`]

Type: `[]string`

Contains the list of tags. You can group by these tags.

=== StatsQuery

Retrieves time-series data stored by the Segment Console. Allows
different types of queries that are all protected within the namespace
of the user.

==== Example

[source,json]
----
{
  "descending": false,
  "limit": -1,
  "measurement": "Flows",
  "offset": -1
}
----

==== Relations

===== `POST /statsqueries`

Sends a query on statistical data.

Parameters:

* `endAbsolute` (`time`): Set the absolute end of the time window.
* `endRelative` (`duration`): Set the relative end of the time window.
* `startAbsolute` (`time`): Set the absolute start of the time window.
* `startRelative` (`duration`): Set the relative start of the time
window.
* `q` (`string`): Filtering query. Consequent `q` parameters will form
an or.

Mandatory Parameters

(`endRelative`) or (`startRelative`) or (`startRelative` and
`endRelative`) or (`startRelative` and `endAbsolute`) or
(`startAbsolute` and `endRelative`) or (`startAbsolute` and
`endAbsolute`)

==== Attributes

===== `descending`

Type: `boolean`

If set, the results will be order by time from the most recent to the
oldest.

===== `fields`

Type: `[]string`

List of fields to extract. If you donâ€™t pass anything, all available
fields will be returned. It is also possible to use a function like
`sum(value)`.

===== `filter`

Type: `string`

Apply a filter to the query.

===== `groups`

Type: `[]string`

Group results by the provided values. Note that not all fields can be
used to group the results.

===== `limit`

Type: `integer`

Limits the number of results. `-1` means no limit.

Default value:

[source,json]
----
-1
----

===== `measurement`

Type:
`enum(Flows | Audit | Enforcers | Files | EventLogs | Packets | EnforcerTraces | Counters | Accesses | DNSLookups | PingReports)`

Name of the measurement.

Default value:

[source,json]
----
"Flows"
----

===== `offset`

Type: `integer`

Offsets the results. -1 means no offset.

Default value:

[source,json]
----
-1
----

===== `results` [`autogenerated`,`read_only`]

Type: link:#timeseriesqueryresults[`timeseriesqueryresults`]

Contains the result of the query.

=== TimeSeriesQueryResults

Represent the results of a stats query.

==== Attributes

===== `rows`

Type: link:#timeseriesrow[`timeseriesrow`]

List of rows.

=== TimeSeriesRow

Represents a time-series row.

==== Attributes

===== `columns`

Type: `[]string`

Columns of the row.

===== `name`

Type: `string`

Name of the row.

===== `tags`

Type: `map[string]string`

List of tags.

===== `values`

Type: `[][]interface{}`

List of tags.
