== core/namespace

=== LocalCA

Can be used to retrieve or renew the local and SSH certificate
authorities of the namespace.

==== Example

[source,json]
----
{
  "SSHCertificateRenew": false,
  "certificateRenew": false
}
----

==== Relations

===== `GET /localcas`

Returns the local and SSH certificate authorities of the namespace.

===== `POST /localcas`

Renews the local and/or SSH certificate authorities of the namespace.

==== Attributes

===== `SSHCertificate` [`autogenerated`,`read_only`]

Type: `string`

The SSH certificate authority used by the namespace.

===== `SSHCertificateRenew`

Type: `boolean`

Set to `true` to renew the SSH certificate authority of the namespace.

===== `certificate` [`autogenerated`,`read_only`]

Type: `string`

The certificate authority used by the namespace.

===== `certificateRenew`

Type: `boolean`

Set to `true` to renew the certificate authority of the namespace.

=== Namespace

A namespace represents the core organizational unit of the system. All
objects always exist in a single namespace. A namespace can also have
child namespaces. They can be used to split the system into
organizations, business units, applications, services or any combination
you like.

==== Example

[source,json]
----
{
  "JWTCertificateType": "None",
  "SSHCAEnabled": false,
  "customZoning": false,
  "localCAEnabled": false,
  "name": "mynamespace",
  "protected": false,
  "serviceCertificateValidity": "168h"
}
----

==== Relations

===== `GET /namespaces`

Retrieves the list of namespaces.

Parameters:

* `authorized` (`boolean`): Returns all namespaces the token bearer has
the right to read. If set, other parameters like `recursive` or `q` will
have no effect.
* `q` (`string`): Filtering query. Consequent `q` parameters will form
an or.

===== `POST /namespaces`

Creates a new namespace.

===== `DELETE /namespaces/:id`

Deletes the namespace with the given ID.

Parameters:

* `q` (`string`): Filtering query. Consequent `q` parameters will form
an or.

===== `GET /namespaces/:id`

Retrieves the namespace with the given ID.

===== `PUT /namespaces/:id`

Updates the namespace with the given ID.

===== `GET /namespaces/:id/oauthinfo`

Retrieves the OAUTH info for this namespace.

Parameters:

* `mode` (`enum(oidc)`): When set to type `OIDC` it will return the data
as a raw JSON object and not a Segment Console compatible API.

===== `GET /namespaces/:id/oauthkeys`

Retrieves the OAUTH info for this namespace.

Parameters:

* `mode` (`enum(oidc)`): When set to `OIDC` it will return the data as a
raw JSON object and not a Segment Console compatible API.

===== `GET /namespaces/:id/trustedcas`

Returns the list of trusted CAs for this namespace.

Parameters:

* `type` (`enum(Any | X509 | SSH | JWT)`): Type of certificate to get.

==== Attributes

===== `ID` [`identifier`,`autogenerated`,`read_only`]

Type: `string`

Identifier of the object.

===== `JWTCertificateType`

Type: `enum(RSA | EC | None)`

JWTCertificateType defines the JWT signing certificate that must be
created for this namespace. If the type is none no certificate will be
created.

Default value:

[source,json]
----
"None"
----

===== `JWTCertificates` [`autogenerated`,`read_only`]

Type: `map[string]string`

JWTCertificates hold the certificates used to sign tokens for this
namespace. This is map indexed by the ID of the certificate.

===== `SSHCAEnabled`

Type: `boolean`

If `true`, an SSH certificate authority (CA) will be generated for the
namespace. This CA can be deployed in SSH server to validate SSH
certificates issued by the controller.

===== `annotations`

Type: `map[string][]string`

Stores additional information about an entity.

===== `associatedSSHCAID` [`read_only`]

Type: `string`

The remote ID of the SSH certificate authority to use.

===== `associatedTags`

Type: `[]string`

List of tags attached to an entity.

===== `createTime` [`autogenerated`,`read_only`]

Type: `time`

Creation date of the object.

===== `customZoning` [`creation_only`]

Type: `boolean`

Defines if the namespace should inherit its parent zone. If this
property is set to `false`, the `zoning` property will be ignored and
the namespace will have the same zone as its parent.

===== `description` [`max_length=1024`]

Type: `string`

Description of the object.

===== `localCAEnabled`

Type: `boolean`

Defines if the namespace should use a local certificate authority (CA).
Switching it off and on again will regenerate a new CA.

===== `metadata` [`creation_only`]

Type: `[]string`

Contains tags that can only be set during creation, must all start with
the `@' prefix, and should only be used by external systems.

===== `name` [`required`,`creation_only`,`format=^[a-zA-Z0-9-_/]+$`]

Type: `string`

The name of the namespace.

===== `namespace` [`autogenerated`,`read_only`]

Type: `string`

Namespace tag attached to an entity.

===== `networkAccessPolicyTags`

_This attribute is deprecated_.

Type: `[]string`

List of tags that will be added to every `or` clause of all network
access policies in the namespace and its children.

===== `normalizedTags` [`autogenerated`,`read_only`]

Type: `[]string`

Contains the list of normalized tags of the entities.

===== `organizationalMetadata`

Type: `[]string`

List of tags that describe this namespace. All organizational tags are
automatically passed to policeable objects (e.g.Â processing units,
external networks, defenders) during their creation.

===== `protected`

Type: `boolean`

Defines if the object is protected.

===== `serviceCertificateValidity`

_This attribute is deprecated_.

Type: `string`

This flag is deprecated and has no incidence.

Default value:

[source,json]
----
"168h"
----

===== `updateTime` [`autogenerated`,`read_only`]

Type: `time`

Last update date of the object.

===== `zoning` [`creation_only`]

Type: `integer`

Defines what zone the namespace should live in.

=== NamespaceMappingPolicy

A namespace mapping defines the namespace a processing unit should be
placed when it is created, based on its tags. When a defender creates a
new processing unit, the system will place it in its own namespace if no
matching namespace mapping can be found. If one match is found, then the
processing unit will be bumped down to the namespace declared in the
namespace mapping. If it finds in that child namespace another matching
namespace mapping, then the processing unit will be bumped down again,
until it reaches a namespace with no matching namespace mappings. This
is very useful to dispatch processes and containers into a particular
namespace, based on a lot of factors. For example, you can put in place
a quarantine namespace mapping that will grab all processing units with
excessive vulnerabilities.

==== Example

[source,json]
----
{
  "disabled": false,
  "mappedNamespace": "/blue/namespace",
  "name": "the name",
  "protected": false,
  "subject": [
    [
      "color=blue"
    ]
  ]
}
----

==== Relations

===== `GET /namespacemappingpolicies`

Retrieves the list namespace mappings.

Parameters:

* `q` (`string`): Filtering query. Consequent `q` parameters will form
an or.

===== `POST /namespacemappingpolicies`

Creates a new namespace mapping.

===== `DELETE /namespacemappingpolicies/:id`

Deletes the mapping with the given ID.

Parameters:

* `q` (`string`): Filtering query. Consequent `q` parameters will form
an or.

===== `GET /namespacemappingpolicies/:id`

Retrieves the mapping with the given ID.

===== `PUT /namespacemappingpolicies/:id`

Updates the mapping with the given ID.

==== Attributes

===== `ID` [`identifier`,`autogenerated`,`read_only`]

Type: `string`

Identifier of the object.

===== `annotations`

Type: `map[string][]string`

Stores additional information about an entity.

===== `associatedTags`

Type: `[]string`

List of tags attached to an entity.

===== `createTime` [`autogenerated`,`read_only`]

Type: `time`

Creation date of the object.

===== `description` [`max_length=1024`]

Type: `string`

Description of the object.

===== `disabled`

Type: `boolean`

Defines if the property is disabled.

===== `mappedNamespace` [`required`,`format=^[a-zA-Z0-9-_/]+$`]

Type: `string`

The namespace to map the `subject` to.

===== `metadata` [`creation_only`]

Type: `[]string`

Contains tags that can only be set during creation, must all start with
the `@' prefix, and should only be used by external systems.

===== `name` [`required`,`max_length=256`]

Type: `string`

Name of the entity.

===== `namespace` [`autogenerated`,`read_only`]

Type: `string`

Namespace tag attached to an entity.

===== `normalizedTags` [`autogenerated`,`read_only`]

Type: `[]string`

Contains the list of normalized tags of the entities.

===== `protected`

Type: `boolean`

Defines if the object is protected.

===== `subject`

Type: `[][]string`

A tag or tag expression identifying the entity to be mapped.

===== `updateTime` [`autogenerated`,`read_only`]

Type: `time`

Last update date of the object.

=== NamespaceRenderer

This object allows you to determine which namespace an object should
reside in based on the tags provided.

==== Example

[source,json]
----
{
  "tags": [
    "a=a",
    "b=b"
  ]
}
----

==== Relations

===== `POST /namespacerenderers`

Renders the namespace where an object should reside.

==== Attributes

===== `namespace` [`autogenerated`,`read_only`]

Type: `string`

The namespace where the object should reside in.

===== `tags` [`required`]

Type: `[]string`

List of tags of the object to render the namespace for.

=== OrganizationalMetadata

Can be used to retrieve the organizational metadata of the namespace.

==== Relations

===== `GET /organizationalmetadata`

Retrieves the list of organizational metadata for the namespace and its
namespace hierarchy.

==== Attributes

===== `metadata`

Type: `[]string`

List of organizational metadata for the namespace.

===== `namespace` [`autogenerated`,`read_only`]

Type: `string`

Namespace tag attached to an entity.
